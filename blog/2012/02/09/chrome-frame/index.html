
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>chrome frame - missionpenguin</title>
  <meta name="author" content="Ryan Kather">

  
  <meta name="description" content="So having spent some time fumbling around in octopress, I&#8217;ve made my first modification. Internet Explorer is a constant source of pain when &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://krondor.github.com/blog/2012/02/09/chrome-frame/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="missionpenguin" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">


  <!--[if IE]>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <script type="text/javascript"
      src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js">
    </script>
    <style>
      .chromeFrameInstallDefaultStyle {
        width: 100%
        border: 5px solid blue;
      }
    </style>
    <script>
      window.attachEvent("onload", function() {
        CFInstall.check({
          mode: "overlay",
        });
      });
    </script>
  <![endif]-->


  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-25958242-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">missionpenguin</a></h1>
  
    <h2>slowly turning to penguins</h2>
  
    <div class="ribbon">
      <a href="https://github.com/krondor/krondor.github.com/tree/source" rel="me">Fork me on GitHub</a>
    </div>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:krondor.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="http://about.me/krondor">About Me</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Chrome Frame</h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-02-09T15:27:00-05:00" pubdate data-updated="true">Feb 9<span>th</span>, 2012</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>So having spent some time fumbling around in <a href="http://octopress.org">octopress</a>,
 I&#8217;ve made my first modification.  Internet Explorer is a constant source of
 pain when theming websites.  As this is my personal blog there isn&#8217;t really a
 reason to be particularly friendly to Internet Explorer, and so I thought why
 not prompt my visitors to install
 <a href="http://code.google.com/chrome/chromeframe/">Chrome Frame</a>.</p>

<p>Chrome Frame effectively replaces the rendering engine of IE with Google Chrome
 through a plugin for IE.  In effect users who install it are now running
 Chrome, and as such are treated with properly working CSS/HTML5/JS support.
 Which now means they can see my nicely rendered 3D logo all in CSS courtesy of
 <a href="%22http://www.markdott.com/2011/01/05/3d-text-using-just-css/">Mark Otto</a>.
  Wonderful, but how to get my visitors to install Chrome Frame?</p>

<!-- more -->


<p></p>

<p>Once Chrome Frame has been installed the user-agent header can report its
 presence.</p>

<figure class='code'><figcaption><span>Chrome Frame User-Agent Example</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='apache'><span class='line'><span class="err">Mozilla/4</span>.<span class="err">0</span> <span class="err">(compatible;</span> <span class="nb">MSIE</span> <span class="m">6</span>.0; Windows NT <span class="m">5</span>.1; SV1; chromeframe/11.0.660.0)
</span></code></pre></td></tr></table></div></figure>


<p>Given that we can detect if Chrome Frame is installed it&#8217;s possible to
 selectively prompt visitors to install it for IE if they haven&#8217;t done this
 already.  There&#8217;s a great guide on the process on the Chromium site
 <a href="http://www.chromium.org/developers/how-tos/chrome-frame-getting-started">here</a>.
 However, I didn&#8217;t want to just go about pasting the scripts snippet into my
 HTML body here.  I mean that&#8217;s why I&#8217;m using Octopress and not just native HTML
 right?  Let&#8217;s programmatically decide if we should push our IE friends toward
 the Chrome light.</p>

<p>So how to inject the Chrome Frame javascript in Octopress?  Let&#8217;s begin with a
 configuration directive to test against in our _config.yml.</p>

<figure class='code'><figcaption><span>_config.yml chrome frame directive</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='yaml'><span class='line'><span class="c1"># Chrome Frame Prompt</span>
</span><span class='line'><span class="l-Scalar-Plain">chromeframe</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now that we have a clause to test against Octopress can decide on whether or not
 to build the chrome frame code into the site.  The only piece left was to
 decide where the code should reside.  Octopress is pretty good at maintaining a
 custom directory structure for modifications to the base.  It&#8217;s a good idea to
 keep that structure so updates to the core are easier to maintain.  Head.html
 seems to be the logical place for onload scripts to me, so I made my custom
 changes there.</p>

<figure class='code'><figcaption><span>chrome frame custom html file location</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>/home/myuser/octopress/source/_includes/custom/head.html
</span></code></pre></td></tr></table></div></figure>


<p>Now I declare when the code should be included given our config.yml directive
 using <a href="http://liquidmarkup.orgi">Liquid</a> markup syntax with an if
 block for site.chromeframe.</p>

<p>I paste in the chrome frame installation script from the Chromium example linked
 above and modify it for my needs, and we&#8217;re almost good to go. I really didn&#8217;t
 change much.  I opted to use overlay mode for the prompt because I&#8217;m not quite
 sure where I&#8217;d like to inject it inline.  The only issue with overlay (besides
 annoyance to my visitors), is that it doesn&#8217;t seem to work on IE7 and earlier.
 I insert a <meta> to the head to enable chrome frame for my pages content
 (this would normally be done in the http server config, but as I don&#8217;t have
 access to that&#8230;).</p>

<figure class='code'><figcaption><span>meta tag to enable chrome frame</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">&quot;X-UA-Compatible&quot;</span> <span class="na">content=</span><span class="s">&quot;chrome=1&quot;</span><span class="nt">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Giving us the final product of&#8230;</p>

<figure class='code'><figcaption><span>[final customized head.html with modifications] (head.html)</span> <a href='/downloads/code/head.html'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="c">&lt;!--Fonts from Google&quot;s Web font directory at http://google.com/webfonts --&gt;</span>
</span><span class='line'><span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic&quot;</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic&quot;</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>
</span><span class='line'>{% if site.chromeframe %}
</span><span class='line'>  <span class="c">&lt;!--[if IE]&gt;</span>
</span><span class='line'><span class="c">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;chrome=1&quot;&gt;</span>
</span><span class='line'><span class="c">    &lt;script type=&quot;text/javascript&quot;</span>
</span><span class='line'><span class="c">      src=&quot;http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js&quot;&gt;</span>
</span><span class='line'><span class="c">    &lt;/script&gt;</span>
</span><span class='line'><span class="c">    &lt;style&gt;</span>
</span><span class='line'><span class="c">      .chromeFrameInstallDefaultStyle {</span>
</span><span class='line'><span class="c">        width: 100%</span>
</span><span class='line'><span class="c">        border: 5px solid blue;</span>
</span><span class='line'><span class="c">      }</span>
</span><span class='line'><span class="c">    &lt;/style&gt;</span>
</span><span class='line'><span class="c">    &lt;script&gt;</span>
</span><span class='line'><span class="c">      window.attachEvent(&quot;onload&quot;, function() {</span>
</span><span class='line'><span class="c">        CFInstall.check({</span>
</span><span class='line'><span class="c">          mode: &quot;overlay&quot;,</span>
</span><span class='line'><span class="c">        });</span>
</span><span class='line'><span class="c">      });</span>
</span><span class='line'><span class="c">    &lt;/script&gt;</span>
</span><span class='line'><span class="c">  &lt;![endif]--&gt;</span>
</span><span class='line'>{% endif %}
</span></code></pre></td></tr></table></div></figure>


<p>So far so good, now we can deploy and test;</p>

<figure class='code'><figcaption><span>build and deploy site changes</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">rake</span> <span class="n">generate</span>
</span><span class='line'><span class="n">rake</span> <span class="n">deploy</span>
</span></code></pre></td></tr></table></div></figure>


<p>Success! My IE visitors will now be greeted with an overlay prompt enticing them
 to install chrome frame.</p>

<p><img src="/images/chrome_frame_overlay.png"></p>

<p>Now if only they&#8217;d install it (or even better just get a full Chrome or Firefox
 browser in the first place).  Most importantly I learned how to control a
 feature of my site by manipulating _config.yml and custom overrides to the
 stock templates.  Fun times!</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Ryan Kather</span></span>

      








  


<time datetime="2012-02-09T15:27:00-05:00" pubdate data-updated="true">Feb 9<span>th</span>, 2012</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/blog/'>blog</a>, <a class='category' href='/blog/categories/chromeframe/'>chromeframe</a>, <a class='category' href='/blog/categories/chromium/'>chromium</a>, <a class='category' href='/blog/categories/config-yml/'>config.yml</a>, <a class='category' href='/blog/categories/howto/'>howto</a>, <a class='category' href='/blog/categories/liquid/'>liquid</a>, <a class='category' href='/blog/categories/markotto/'>markotto</a>, <a class='category' href='/blog/categories/octopress/'>octopress</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://krondor.github.com/blog/2012/02/09/chrome-frame/" data-via="krondor" data-counturl="http://krondor.github.com/blog/2012/02/09/chrome-frame/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2012/02/08/hello-world/" title="Previous Post: hello world">&laquo; hello world</a>
      
      
        <a class="basic-alignment right" href="/blog/2012/05/08/solarized/" title="Next Post: solarized">solarized &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
<h1>missionpenguin</h1>
<p>My name is <a href="http://about.me/krondor">Ryan</a>, and I'm a geek. Hence this blog will have geeky topics;<br/></p>
<p><center>devops, linux, android</br>
security, cloud, code</br>
etc...</center></p>
<p>Oh, and there might be an occasional post about hockey, punk, and non-technical stuff.  I apologize in advance...</p>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/02/15/so-long-it-except-not-really/">So Long IT, Except Not Really</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/06/15/vendors-dont-be-a-dick/">vendors: don't be a dick</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/05/09/two-factor-and-lastpass/">two factor and lastpass</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/05/08/solarized/">solarized</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/02/09/chrome-frame/">chrome frame</a>
      </li>
    
  </ul>
</section>

<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/110157564326709780111?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/krondor">@krondor</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'krondor',
            count: 2,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("krondor", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/krondor" class="twitter-follow-button" data-show-count="false">Follow @krondor</a>
  
</section>



  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Ryan Kather -
  <span class="credit">
    Powered by <a href="http://octopress.org">Octopress</a>.
  </span>
  <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title"><a xmlns:cc="http://creativecommons.org/ns#" href="http://missionpenguin.com" property="cc:attributionName" rel="cc:attributionURL">Mission Penguin</a></span> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'missionpenguin';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://krondor.github.com/blog/2012/02/09/chrome-frame/';
        var disqus_url = 'http://krondor.github.com/blog/2012/02/09/chrome-frame/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
